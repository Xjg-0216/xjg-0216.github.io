# é›¶ CMake&make&Makefile


## ğŸ”§ 1. make

* `make` æ˜¯ä¸€ä¸ª **è‡ªåŠ¨åŒ–æ„å»ºå·¥å…·**ã€‚
* å®ƒè¯»å–åä¸º **Makefile** çš„æ–‡ä»¶ï¼Œæ ¹æ®é‡Œé¢çš„è§„åˆ™æ¥ï¼š

  * ç¼–è¯‘æºä»£ç  `.cpp`
  * é“¾æ¥æˆå¯æ‰§è¡Œæ–‡ä»¶ `.out`

### âœ… ä¸¾ä¾‹ï¼š

```bash
make
```

ä¼šè‡ªåŠ¨æŸ¥æ‰¾å½“å‰ç›®å½•ä¸‹çš„ `Makefile` æ–‡ä»¶ï¼Œå¹¶æ‰§è¡Œé‡Œé¢çš„è§„åˆ™ã€‚

---

## ğŸ“„ 2. Makefile

* `Makefile` æ˜¯ä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶ï¼Œé‡Œé¢å†™ç€ â€œæ€ä¹ˆç¼–è¯‘ã€é“¾æ¥ç¨‹åºçš„æ­¥éª¤â€ã€‚

### âœ… ä¸€ä¸ªæœ€ç®€å•çš„ Makefileï¼š

```make
main: main.o math.o
	g++ -o main main.o math.o

main.o: main.cpp
	g++ -c main.cpp

math.o: math.cpp
	g++ -c math.cpp

clean:
	rm -f *.o main
```

ä½ å¯ä»¥åœ¨ç»ˆç«¯è¿è¡Œï¼š

```bash
make        # é»˜è®¤æ„å»º main
make clean  # æ¸…ç†ä¸´æ—¶æ–‡ä»¶
```

---

## ğŸ—ï¸ 3. CMake

* `CMake` æ˜¯ä¸€ä¸ª **è·¨å¹³å°çš„è‡ªåŠ¨åŒ–æ„å»ºç³»ç»Ÿç”Ÿæˆå™¨**ã€‚
* å®ƒä¼šè¯»å–ä¸€ä¸ªå« `CMakeLists.txt` çš„é…ç½®æ–‡ä»¶ï¼Œ**è‡ªåŠ¨ç”Ÿæˆ Makefile æˆ–å…¶ä»–æ„å»ºç³»ç»Ÿçš„å·¥ç¨‹æ–‡ä»¶ï¼ˆå¦‚ Visual Studio å·¥ç¨‹ï¼‰**ã€‚
* ä½ åªéœ€è¦ç»´æŠ¤ä¸€å¥—é…ç½®ï¼ˆ`CMakeLists.txt`ï¼‰ï¼ŒCMake ä¼šå¸®ä½ é€‚é…ä¸åŒç³»ç»Ÿã€ä¸åŒç¼–è¯‘å™¨ã€‚

### âœ… ç¤ºä¾‹ `CMakeLists.txt`ï¼š

```cmake
cmake_minimum_required(VERSION 3.10)
project(MyApp)

set(CMAKE_CXX_STANDARD 17)

add_executable(main main.cpp math.cpp)
```

### âœ… ä½¿ç”¨æµç¨‹ï¼š

```bash
mkdir build
cd build
cmake ..       # ç”Ÿæˆ Makefile
make           # ç¼–è¯‘
```

---

## âœ… 4. æ€»ç»“ï¼šä¸‰è€…åŒºåˆ«ä¸è”ç³»

| åç§°         | ç±»å‹ | ä½œç”¨                       |
| ---------- | -- | ------------------------ |
| `make`     | å·¥å…· | è¯»å– Makefileï¼Œæ‰§è¡Œç¼–è¯‘         |
| `Makefile` | æ–‡ä»¶ | å†™æ˜ç¼–è¯‘è§„åˆ™                   |
| `CMake`    | å·¥å…· | è‡ªåŠ¨ç”Ÿæˆ Makefileï¼ˆæˆ–å…¶ä»–æ„å»ºç³»ç»Ÿå·¥ç¨‹ï¼‰ |

---

## ğŸš€ å›¾ç¤ºç†è§£ï¼š

```
ä½ å†™çš„ CMakeLists.txt
         â†“
     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚ CMake  â”‚ â† è´Ÿè´£è¯»å–é…ç½®
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“ ç”Ÿæˆ
      Makefileï¼ˆæˆ– Ninja ç­‰ï¼‰
         â†“
     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚ make   â”‚ â† è´Ÿè´£æ‰§è¡Œç¼–è¯‘åŠ¨ä½œ
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“
     ç¼–è¯‘åçš„ç¨‹åº
```

