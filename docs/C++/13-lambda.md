# lambdaå‡½æ•°

Lambda è¡¨è¾¾å¼æ˜¯ C++11 å¼•å…¥çš„ä¸€ç§ è½»é‡çº§çš„åŒ¿åå‡½æ•°ã€‚æŠŠå®ƒå½“æˆ â€œå†™åœ¨å‡½æ•°é‡Œçš„å‡½æ•°â€ï¼Œå¸¸ç”¨äº ä¸´æ—¶å‡½æ•°é€»è¾‘ã€å›è°ƒå‡½æ•°ã€STLç®—æ³•ç­‰ã€‚


å½“ç„¶å¯ä»¥ï¼Œä¸‹é¢æ˜¯ **C++ Lambda è¡¨è¾¾å¼çš„åŸºæœ¬ä½¿ç”¨**ï¼Œé€‚åˆåˆå­¦è€…ç†è§£ï¼š



## 1. åŸºæœ¬è¯­æ³•

```cpp
[capture](parameter_list) -> return_type {
    // function body
}
```

å…¶ä¸­ï¼š

| éƒ¨åˆ†                 | è¯´æ˜                       |
| ------------------ | ------------------------ |
| `[capture]`        | æ•è·å¤–éƒ¨å˜é‡æ–¹å¼                 |
| `(parameter_list)` | å‚æ•°åˆ—è¡¨ï¼ˆå¦‚ `(int a, int b)`ï¼‰ |
| `-> return_type`   | å¯é€‰ï¼ŒæŒ‡å®šè¿”å›ç±»å‹                |
| `{}`               | å‡½æ•°ä½“                      |


## 2. åŸºæœ¬ç”¨æ³•ç¤ºä¾‹

### 2.1 æœ€ç®€å•çš„ Lambda

```cpp
auto say_hello = []() {
    std::cout << "Hello, Lambda!" << std::endl;
};

say_hello();  // è°ƒç”¨
```

### 2.2 å¸¦å‚æ•°å’Œè¿”å›å€¼

```cpp
auto add = [](int a, int b) -> int {
    return a + b;
};

std::cout << add(3, 4);  // è¾“å‡º 7
```

ğŸ’¡ è¿”å›å€¼ç±»å‹å¯ä»¥çœç•¥ï¼ˆè®©ç¼–è¯‘å™¨æ¨å¯¼ï¼‰ï¼š

```cpp
auto add = [](int a, int b) {
    return a + b;
};
```


## 3. æ•è·å¤–éƒ¨å˜é‡ï¼ˆ`[capture]`ï¼‰

### 3.1 æŒ‰å€¼æ•è· `[=]`

```cpp
int x = 5;
auto f = [=]() {
    std::cout << x << std::endl;  // è¾“å‡º 5
};
f();
```

### 3.2 æŒ‰å¼•ç”¨æ•è· `[&]`

```cpp
int x = 5;
auto f = [&]() {
    x = 10;
};
f();
std::cout << x << std::endl;  // è¾“å‡º 10
```

### 3.3 æ··åˆæ•è·

```cpp
int a = 1, b = 2;
auto f = [a, &b]() {
    std::cout << a << ", " << b << std::endl;
};
```


## 4. å¸¸è§åº”ç”¨åœºæ™¯

### 4.1 ä¸ STL ç®—æ³•é…åˆä½¿ç”¨

```cpp
std::vector<int> v = {1, 2, 3, 4};

std::for_each(v.begin(), v.end(), [](int x) {
    std::cout << x << " ";
});
```

### 4.2 è‡ªå®šä¹‰æ’åºè§„åˆ™

```cpp
std::sort(v.begin(), v.end(), [](int a, int b) {
    return a > b;  // é™åº
});
```

### 4.3 å¤šçº¿ç¨‹å‡½æ•°ä½“

```cpp
#include <thread>

std::thread t([] {
    std::cout << "Hello from thread" << std::endl;
});
t.join();
```

---

## 5. `mutable` å…³é”®å­—

é»˜è®¤æƒ…å†µä¸‹ï¼ŒæŒ‰å€¼æ•è·çš„å˜é‡æ˜¯ **åªè¯»** çš„ã€‚å¦‚æœä½ æƒ³ä¿®æ”¹å®ƒçš„å‰¯æœ¬ï¼Œéœ€è¦åŠ ä¸Š `mutable`ï¼š

```cpp
int x = 10;
auto f = [x]() mutable {
    x += 5;  // å…è®¸ä¿®æ”¹å‰¯æœ¬
    std::cout << x << std::endl;
};
f();  // è¾“å‡º 15
std::cout << x << std::endl;  // è¿˜æ˜¯ 10ï¼ŒåŸå§‹å˜é‡æ²¡å˜
```

---

## 6. å°ç»“

| ç‰¹æ€§        | è¯´æ˜         |
| --------- | ---------- |
| æ”¯æŒåŒ¿åå‡½æ•°    | âœ…          |
| å¯ä»¥æ•è·å¤–éƒ¨å˜é‡  | âœ…ï¼ˆæŒ‰å€¼/å¼•ç”¨ï¼‰   |
| å¯ä»¥ä½œä¸ºå›è°ƒä½¿ç”¨  | âœ…ï¼ˆå¦‚çº¿ç¨‹ã€æ’åºç­‰ï¼‰ |
| æ”¯æŒæ¨å¯¼è¿”å›ç±»å‹  | âœ…          |
| ç±»ä¼¼å‡½æ•°å¯¹è±¡/é—­åŒ… | âœ…          |

